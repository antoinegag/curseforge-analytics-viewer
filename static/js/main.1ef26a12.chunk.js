(this["webpackJsonpcurseforge-analytics-viewer"]=this["webpackJsonpcurseforge-analytics-viewer"]||[]).push([[0],{239:function(e,t,a){e.exports=a(400)},244:function(e,t,a){},246:function(e,t,a){},400:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(183),c=a.n(l),o=(a(244),a(13)),s=a(12),i=a.n(s),m=a(80),u=a(24),d=a(11),f=a(36),p=a.n(f),h=(a(246),a(199)),E=a(185),g=a.n(E),v=a(49);function b(e){var t=e.className,a=e.onUpload,l=Object(n.useState)(),c=Object(o.a)(l,2),s=c[0],u=c[1],d=Object(n.useCallback)(function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[0]){e.next=2;break}return e.abrupt("return");case 2:n=t[0],u(n),a&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),f=Object(h.a)({onDrop:d}),E=f.getRootProps,b=f.getInputProps,w=f.isDragActive;return s?r.a.createElement("div",{className:"flex items-center"},r.a.createElement(v.b,{size:24}),s.name):r.a.createElement("div",Object.assign({},E(),{className:p()(t,"drop-zone")}),r.a.createElement("input",b()),w?r.a.createElement(g.a,{type:"Rings",color:"#DD5F18",height:200,width:200}):r.a.createElement("div",{className:"text-xl text-center my-2"},"Drop export here or",r.a.createElement("br",null),r.a.createElement("span",{className:"underline cursor-pointer"},"choose a file")))}function w(e){var t=e.children,a=e.href,n=Object(d.f)();return r.a.createElement("div",{className:"text-xl font-brand"},r.a.createElement(u.b,{to:a,className:p()("no-underline",n.pathname===a?"bracket-active":"bracket")},t))}function y(){return r.a.createElement("div",{className:"flex items-center flex-wrap"},r.a.createElement("div",{className:"flex-grow"},r.a.createElement(u.b,{to:"/",className:"no-underline flex items-center flex-grow"},r.a.createElement("img",{src:"logo-bg.png",width:"100",className:"rounded-full mr-4 hidden md:block",alt:"CurseForge Analytics logo"}),r.a.createElement("h1",{className:"font-brand flex flex-wrap"},"CurseForge",r.a.createElement("div",{className:"font-bold slide-right ml-2"},r.a.createElement("p",null,"Analytics"))))),r.a.createElement("div",{className:"w-full lg:w-auto lg:text-right mt-2 flex flex-col",style:{direction:"rtl"}},r.a.createElement(w,{href:"/privacy"},"Privacy"),r.a.createElement(w,{href:"/help"},"Help"),r.a.createElement(w,{href:"/contact"},"Contact")))}var N=a(200),x=a(187),D=a.n(x);function k(e){return new Promise((function(t,a){D.a.parse(e,{complete:function(e){t(e)}})}))}function S(e){var t=Object(N.a)(e),a=t[0];a.splice(1,2),t.shift(),t.pop();var n=[],r={name:t[1][2],id:t[1][1]},l=0,c=0,o=0,s=0,i=0;t.forEach((function(e){var t={date:e[0],points:parseFloat(e[3]),historicalDownload:parseInt(e[4]),dailyDownload:parseInt(e[5]),dailyUniqueDownload:parseInt(e[6]),dailyTwitchAppDownload:parseInt(e[7]),dailyCurseForgeDownload:parseInt(e[8])};l+=t.points,c+=t.dailyDownload,o+=t.dailyUniqueDownload,s+=t.dailyCurseForgeDownload,i+=t.dailyTwitchAppDownload,n.push(t)}));var m=l/n.length,u={curseDownloadSum:s,twitchDownloadSum:i,pointSum:l,downloadSum:c,uniqueDownloadSum:o,cursePercentage:s/c*100,twitchPercentage:i/c*100,pointDailyAverage:m,growth:c/n[0].historicalDownload*100,downloadDailyAverage:c/n.length,uniqueness:o/c*100};return{project:r,fields:a,stats:n,summary:u}}var j=a(188);function C(e){var t=e.value;return r.a.createElement(r.a.Fragment,null,t)}function O(e){var t=e.data,a=e.height,n=void 0===a?400:a,l=e.color,c=void 0===l?"#DD5F18":l,o=e.ValueRenderer,s=void 0===o?C:o;return r.a.createElement("div",{style:{height:n}},r.a.createElement(j.a,{data:t,margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"time",useUTC:!1,format:"%Y-%m-%d",precision:"day"},yScale:{type:"linear",min:"auto",max:"auto"},tooltip:function(e){var t=e.point,a=t.data.x;return r.a.createElement("div",{className:"bg-gray-100 p-2 border border-gray-500"},r.a.createElement("div",null,"".concat(a.getDay(),"-").concat(a.getMonth(),"-").concat(a.getFullYear())),r.a.createElement("div",null,r.a.createElement(s,{value:t.data.y})))},enablePoints:!1,enableGridX:!1,axisBottom:{format:function(e){var t=e;return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1)}},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legendOffset:-40,legendPosition:"middle"},colors:c,pointColor:{theme:"background"},pointBorderColor:{from:"serieColor"},useMesh:!0}))}function F(e){var t=e.title,a=e.stats,n=e.field,l=e.className,c=e.color,o=void 0===c?"#DD5F18":c,s=e.ValueRenderer,i=[{id:t,color:o,data:a.map((function(e){return{x:e.date,y:e[n]}}))}];return r.a.createElement("div",{className:p()("flex flex-col",l)},r.a.createElement("h3",null,t),r.a.createElement("div",{className:"h-full flex-grow"},r.a.createElement(O,{data:i,ValueRenderer:s,color:o})))}function A(e){var t=e.analytics,a=t.stats,n=t.project;t.fields,t.summary;return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,r.a.createElement("span",{className:"font-semibold"},n.name)),r.a.createElement("div",null,r.a.createElement("span",{className:"font-bold"},a[0].date)," to"," ",r.a.createElement("span",{className:"font-bold"},a[a.length-1].date))),r.a.createElement(F,{stats:t.stats,field:"points",title:"Daily points",className:"mb-6",ValueRenderer:function(e){var t=e.value;return r.a.createElement(r.a.Fragment,null,t," (","".concat((.05*parseFloat(t)).toFixed(2))," ","USD)")}}),r.a.createElement(F,{stats:t.stats,field:"dailyDownload",title:"Daily downloads",className:"mb-6"}),r.a.createElement(F,{stats:t.stats,field:"historicalDownload",title:"Downloads over time",className:"mb-6"}))}function P(e){var t=e.children;return r.a.createElement("div",{className:"lg:w-2/3 mx-5 lg:mx-auto"},r.a.createElement("div",{className:"mb-2 flex items-center"},r.a.createElement(v.a,{size:16}),r.a.createElement(u.b,{to:"/",className:"no-underline bracket"},"Home")),t)}function I(){return r.a.createElement(P,null,r.a.createElement("h2",{className:"mb-3"},"Privacy"),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h3",{className:"mb-3"},"Data"),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h4",{className:"mb-1"},"Usage"),r.a.createElement("p",null,"The data uploaded to this app is only used to generate statistics and display them.")),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h4",null,"Collection"),r.a.createElement("p",null,"No data is collected by the application. Export data, raw and processed is never sent to any remote server or parties.")),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h4",null,"Sharing"),r.a.createElement("p",null,"No data is ever shared with any third party."))),r.a.createElement("div",null,r.a.createElement("p",null,"This privacy policy is subject to change at any time"),r.a.createElement("p",null,"Last update: ",r.a.createElement("span",{className:"font-bold"},"2020-09-27")),r.a.createElement(u.b,{to:"/contact"},"Contact")))}function R(){return r.a.createElement(P,null,r.a.createElement("h2",{className:"mb-3"},"Help"),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h3",{className:"mb-2"},"Getting your CurseForge export"),r.a.createElement("p",null,"Head to the"," ",r.a.createElement("a",{href:"https://minecraft.curseforge.com/dashboard/projects",target:"_blank",rel:"noopener noreferrer"},"CurseForge project dashboard")," ","and click on the"," ",r.a.createElement("span",{className:"bg-green-600 p-2 text-white rounded-lg"},"Download")," ","button in the Analytics column.")),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h3",{className:"mb-2"},"Something is wrong"),r.a.createElement("p",null,"For any issue please open an issue on"," ",r.a.createElement("a",{href:"https://github.com/antoinegag/curseforge-analytics-viewer/issues",target:"_blank",rel:"noopener noreferrer"},"Github")," ","or ",r.a.createElement(u.b,{to:"/contact"},"contact")," me")))}function U(){return r.a.createElement(P,null,r.a.createElement("h2",{className:"mb-3"},"Contact"),r.a.createElement("p",{className:"mb-4"},"Don't hesitate to get in touch if you have any question or concern."),r.a.createElement("div",{className:"mb-3"},r.a.createElement("h4",{className:"mb-2 flex items-center font-sans"},r.a.createElement(v.c,{size:32,className:"mr-2"}),r.a.createElement("a",{href:"mailto:cfa@antoineg.dev"},"cfa@antoineg.dev")),r.a.createElement("h4",{className:"mb-2 flex items-center font-sans"},"Twitter"," ",r.a.createElement("a",{className:"ml-2",href:"https://twitter.com/antoineg_dev",target:"_blank",rel:"noopener noreferrer"},"@antoineg_dev")," ")))}var T=function(){Object(n.useEffect)((function(){var e=localStorage.getItem("lastImport");null!=e&&E(JSON.parse(e))}),[]);var e=Object(n.useCallback)(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,k(t);case 3:a=e.sent,n=S(a.data),E(n),localStorage.setItem("lastImport",JSON.stringify(n)),c(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(),f=Object(o.a)(s,2),h=f[0],E=f[1];return r.a.createElement(u.a,null,r.a.createElement("div",{className:"min-h-screen p-5 flex flex-col mx-2"},r.a.createElement("div",{className:"lg:w-2/3 mx-5 lg:mx-auto"},r.a.createElement(y,null),r.a.createElement("hr",{className:"my-5"})),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/privacy"},r.a.createElement(I,null)),r.a.createElement(d.a,{path:"/help"},r.a.createElement(R,null)),r.a.createElement(d.a,{path:"/contact"},r.a.createElement(U,null)),r.a.createElement(d.a,{path:"/"},l&&r.a.createElement("div",null,"Loading"),!l&&h&&r.a.createElement(A,{analytics:h}),!l&&r.a.createElement(b,{className:p()({"flex-grow":!h}),onUpload:e})))))},W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(399);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/curseforge-analytics-viewer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/curseforge-analytics-viewer","/service-worker.js");W?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):q(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):q(t,e)}))}}()}},[[239,1,2]]]);
//# sourceMappingURL=main.1ef26a12.chunk.js.map